<Project>
    <ItemGroup>
        <AdditionalFiles Include="$(ProjectDir)plugin.d.json" />
        <AdditionalFiles Include="$(ProjectDir)plugin.json" CopyToOutputDirectory="PreserveNewest" />
    </ItemGroup>
    <!-- Read Meta Data Then Convert To PluginJsonFile Before Build -->
    <Target Name="ReadMetaData" BeforeTargets="BeforeBuild">
        <Exec Command="dotnet $(ToolExeFile) 1 $(ProjectDir) $(MSBuildProjectFile)"
              ConsoleToMSBuild="True"/>
    </Target>

    <!-- Copy PluginMeta DefineFile To Plugin Dir -->
    <Target Name="CopyPluginDFiles" BeforeTargets="ReadMetaData"
            Condition="Exists('$(PluginDFile)') ">
        <!-- PluginDFile is from `Loaders.Build.props` -->
        <Copy
                SourceFiles="$(PluginDFile)"
                DestinationFiles="$(ProjectDir)plugin.d.json"/>
    </Target>

</Project>